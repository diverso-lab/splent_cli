#!/bin/bash

# ---------------------------------------------------------------------------
# Creative Commons CC BY 4.0 - SPLENT - Diverso Lab
# ---------------------------------------------------------------------------
# This script is licensed under the Creative Commons Attribution 4.0 
# International License. You are free to share and adapt the material 
# as long as appropriate credit is given, a link to the license is provided, 
# and you indicate if changes were made.
# https://creativecommons.org/licenses/by/4.0/
# ---------------------------------------------------------------------------

set -e

echo "ğŸš€ [Core requirements] entrypoint starting..."

# Install splent_framework
if [ -d /workspace/splent_framework ]; then
    echo "ğŸ” Installing splent_framework in editable mode..."
    pip install --no-cache-dir -e /workspace/splent_framework
else
    echo "ğŸ“¦ Installing splent_framework from pyproject.toml [core]..."
    pip install --no-cache-dir "{{ product_name }}[core]"
fi

# Install splent_cli
if [ -d /workspace/splent_cli ]; then
    echo "ğŸ” Installing splent_cli in editable mode (with [dev])..."
    pip install --no-cache-dir -e /workspace/splent_cli
    pip install --no-cache-dir -e /workspace/splent_cli[dev]
else
    echo "âš ï¸  splent_cli directory not found. Skipping editable install."
fi

echo "âœ… [Core requirements] entrypoint finished."
